# 把任意网页转化成助记媒介

原文：[Turning any web page into the mnemonic medium (andymatuschak.org)](https://notes.andymatuschak.org/z2hABbXxq3dz9XQ6bWrqLyModyC5EC2MXxNA)

量子国度是专门制作的网站；文章的呈现与助记媒介的机制紧密结合在一起。然而，助记媒介的主要交互是足够独立的，因此，这些交互应该可以通过简单的 HTML 代码嵌入任意网页。

我有操作系统层级的间隔重复系统这一愿景，能任意嵌入这点对这个愿景是核心的一环。

## Web 组件

通过设定新的 HTML 标签（比如 `<card>`），我们可以定义助记卡片的规格。之后我们会提供 Javascript 库，其功能是对导入这个库的页面，将这些组件「注水」，在运行时把标签替换为 DOM 节点。除了 Edge 的所有现代浏览器都支持这样的 Web 组件，而且似乎有 Web 组件的 polyfill。

这个方法非常灵活：你可以替换客户端的库，只要支持同一个 Web 组件规格即可；未来可以增加对不同后端服务器的支持。可以扩充这个 JS 库所支持的功能。出版者可以自己部署 JS，或者利用我们手下的 CDN。如果 JS 被禁用了，或者脚本无法获取，卡片只是会不显示。甚至可以定义标签打印时的样式。

这个方法需要不少抽象。如果需要大改协议、规格、状态格式之类，我们可能会遇到兼容问题。

更重要的是，这个方法需要作者/出版者撰写 HTML。假如作者的工作流是从 InDesign 源文件导出 HTML，在这样的工作流里加入卡片就比较困难了。如果 HTML 文档不是「source of truth」，只要作者重新从源文件导出，卡片标签会被删除。

对于这种方法，可能需要为 Wordpress 之类的平台写插件。

### 第三方的用户验证有很高门槛

只要用户登录了，他们应该不用在每个网站登录就在边上网边积累卡片。这样很难实现啊！

托管网站不能写 cookie 让其他托管网站读取；cookie 是按来源锁定的。

我们可以把验证机制嵌入在 iframe 里，在同一来源托管，但这样的 cookie 是「第三方 cookie」。最近几年来，浏览器开始激进地锁定第三方 cookie，其中以 Safari 为最。其原因是第三方 cookie 被广泛用于实现侵犯隐私的跟踪和广告功能。

## 解析并替换文本块

一些工作流中用户不能随意添加 HTML 标签。比如利用只有可视化编辑手段的博客软件制作网站。

这时候，如果假定我们能注入脚本，作者便可以像[]里一样添加问题，之后在运行时由脚本解析提取。